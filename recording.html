<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" />

	<title>DARR NU DAARA</title>

    <link rel="stylesheet" href="css/fontawesome.min.css" />
    <link rel="stylesheet" href="css/main.min.css" />
    
</head>
<body>
<!-- main start -->
<main class="main">
 

    <!-- header start -->
    <header class="header">
        <div class="headerInsider">
            <a href="home.html"><img class="logo" src="images/logo.png" alt="logo" /></a>
            <aside class="menubar" id="menubar">
                <span></span><span></span><span></span>
            </aside>
            <div class="headerRight" id="menucontainer">
                <div class="headercontainer">
                    <ul>
                        <li class="head_menu">
                            <a href="#">
                                <img src="images/menu-icon1.png" alt="ABOUT" />
                                <span>ABOUT</span> 
                                <i class="fa fa-angle-right" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="head_menu">
                            <a href="participate-now.html">
                                <img src="images/menu-icon2.png" alt="PARTICIPATE" />
                                <span>PARTICIPATE NOW</span>
                                <i class="fa fa-angle-right" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="head_menu">
                            <a href="get-in-touch.html">
                                <img src="images/menu-icon3.png" alt="GET IN TOUCH" />
                                <span>GET IN TOUCH</span>
                                <i class="fa fa-angle-right" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="login_before">
                            <a href="login.html">
                                <img src="images/user-icon.png" alt="LOG IN" />
                                <span>LOG IN</span>
                            </a>
                        </li>
                        <li class="login_after">
                            <div class="login_after_head" id="login_after_head">
                                <img id="userprofilepicture" src="images/user-icon.png" alt="user" />
                                <span id="userprofilename">Yesh</span>
                            </div>
                            <div class="login_after_body" id="login_after_body">
                                <h3>
                                    <span>yashmathur@mail.com</span>
                                    <span>7838002120</span>
                                </h3>
                                <h4><a href="previous-entries.html">Previous Entries</a></h4>
                                <h5>
                                    <a href="/">
                                        <span>Log Out</span> 
                                        <img src="images/log-out.png" alt="log out" />
                                    </a>
                                </h5>
                            </div>
                        </li>
                    </ul>

                    <div class="header-bottom-mobile">
                        <p>
                            <a href="https://www.youtube.com/user/MountainDewIndia?app=desktop" target="_blank"><i class="fa fa-youtube-play" aria-hidden="true"></i></a>
                            <a href="https://www.facebook.com/mountaindewindia/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                            <a href="https://twitter.com/mountaindewin?lang=en" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                            <a href="https://www.instagram.com/mountaindewin/?hl=en" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                        </p>
                        <h2>Copyright &copy; 2023 Pepsico inc. all rights reserved.</h2>
                    </div>
                    
                </div>
            </div>
        </div>
    </header>
    <!-- header end -->




 




    <!-- recordingscreen start -->
    <section class="recordingscreenwrap bgwithout">
        <div class="recordingscreencontainer">
            
            <div class="recordingholder">
                    <i class="fa fa-angle-left" aria-hidden="true" onclick="window.open('home.html','_self')"></i>
                    <div class="recordingvideopart">    
                        <video id="video" autoplay="autoplay"></video>
                    </div>
                    <div class="recordingtextpart">
                        <div class="recordingsroll">
                            <div class="audiotext" id="audiotext">
                                ਤੁਸੀ ਕਿਵੇਂ ਹੋ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾਂ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾਂ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾ 
                                ਤੁਸੀ ਕਿਵੇਂ ਹੋ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾਂ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾਂ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾ 
                                ਤੁਸੀ ਕਿਵੇਂ ਹੋ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾਂ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾਂ ਵੈ ਜਾਨ ਵਾਲੇਯਾ ੲਨ੍ਜ ਛਡ ਕੇ ਨਾ ਜਾਵੀਂ ਕੀਤੇ ਵਅਦੇ ਸਾਰੇ ਓ ਤੋੜ ਨਿਭਾਵੀਂ ਗਲਾਂ ਇਸ਼੍ਕ਼ ਦਿ ਕਿਤੀਯਂ ਸਨ੍ਗ ਰਾਤਾਂ ਕਡੀਯਾ
                            </div>
                        </div>
                    </div>
            </div>
            <div class="recordingcontrols">
                <audio id="audio" src="lib/audio/audiofile.mp3"></audio>
                <input class="rbtn audioPlayPauseBTN stop_audio" type="button" id="audio-btn" value="Play Audio" onclick="PlayPauseAudio();" /> 
                <span class="rbtn instructionrecording" onclick="instructionrecording();">instruction</span> 
                <input class="rbtn recordingStartStopBTN stop_recording" type="button" id="recording-btn" value="Start Recording" onclick="StartStopRecording();" />
                <input type="button" id="start-btn" value="Start Recording" style="display: none;" />
                <input type="button" id="stop-btn" value="Stop Recording" style="display: none;" /> 
                <span class="rbtn restartrecording" onclick="restartrecording();">restart recording</span>  
                <span class="rbtn frontbackrecording" onclick="camerachangerecording();">front back camera</span>   
            </div>

            <div class="recordingcontrols">
                <a class="downloadrecording" id="download-link" style="display: none;" target="_blank">Download</a>
                &nbsp;
                <a class="downloadrecording" id="downloadffmpeg" style="display: none;" target="_blank">Download Recorded Video</a>
            </div>
            
        </div>
    </section>
    <!-- recordingscreen end -->
    

    
    
    <!-- bottomsection start -->
    <div class="bottomsection">
        <section>
            <div class="bottomcontainer" id="selectsongpart" style="display: block;">
                <ul class="botul">
                    <li class="active"><span>Part 1</span></li>
                    <li><span>Part 2</span></li>
                    <li><span>Part 3</span></li>
                    <li><span>Part 4</span></li>
                </ul>
            </div>
            <div class="bottomcontainer" id="selectsongnext" style="display: none;">
                <div class="botmain">
                    <p>Select a part to proceed</p>
                    <aside>
                        <span class="ssbtn_resume" id="recording_resume">Resume</span>
                        <span class="ssbtn_next" id="recording_next">Next</span>
                    </aside>
                </div>
            </div>
        </section>
    </div>
    <!-- bottomsection  end  -->
    

</main>
<!-- main end -->





<!-- loader === start -->
<div id="pageloader" class="pageloader">
    <div><i class="fa fa-spinner fa-spin"></i></div>
</div>
<!-- loader === end -->






  
<script src="scripts/jquery-min.js"></script>
<script src="scripts/common.js"></script>
<script src="scripts/jquery-ui.js"></script>
<script src="scripts/slimscroll.min.js"></script>
<script>
    const audioElement = document.querySelector('audio');
    
    const videoElement = document.querySelector('video');
    const startBtn = document.querySelector('#start-btn');
    const stopBtn = document.querySelector('#stop-btn');
    const downloadLink = document.querySelector('#download-link');
    const downloadRecordVideoLink = document.querySelector('#downloadffmpeg');

    ValidateForMediaRecorder();

    function ValidateForMediaRecorder() {
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            console.log("MediaRecorder API is supported");
            AccessUserCameraAndMicroPhone();
        } else {
            console.error("MediaRecorder API is not supported");
        }
    }

    function AccessUserCameraAndMicroPhone() {

        navigator.mediaDevices.getUserMedia({
            video: true,
            audio: false
        }).then(function (stream) {
            videoElement.srcObject = stream;
            var mediaRecorder = new MediaRecorder(stream);
            var chunks = [];

            mediaRecorder.addEventListener("dataavailable", function (event) {
                chunks.push(event.data);
                var videoBlob = event.data;
                var reader = new FileReader();
                reader.onloadend = function () {
                    var base64Video = reader.result;
                    sendVideoToServer(base64Video);
                };
                reader.readAsDataURL(videoBlob);
            });

            mediaRecorder.addEventListener("stop", function () {
                debugger;
                var blob = new Blob(chunks, { type: "video/mp4" });
                const url = URL.createObjectURL(blob);
                downloadLink.href = url;
                //downloadLink.download = 'recorded-video.mp4';
                chunks = [];
            });

            startBtn.addEventListener('click', function () {
                mediaRecorder.start();
                startBtn.setAttribute('disabled', true);
                stopBtn.removeAttribute('disabled');
            });

            stopBtn.addEventListener('click', function () {
                mediaRecorder.stop();
                stopBtn.setAttribute('disabled', true);
                downloadLink.style.display = 'block';
                var audio = document.getElementById("audio");
                audio.pause();
                audio.currentTime = 0;
            });

        });

    }

    function sendVideoToServer(base64Video) {
        debugger;
        var data = JSON.stringify({ videoData: base64Video });
        PageMethods.SaveVideo(base64Video, onSucceed, onerror);
    }

    function onerror() {
    }

    function onSucceed(ds) {
        console.log(ds);
        var _val = ds.split(',');
        downloadRecordVideoLink.style.display = 'block';
        downloadRecordVideoLink.href = "lib/output/" + _val[1];
        downloadLink.href = "lib/video/" + _val[1];
        alert(_val[0]);
        console.log(_val[2]);
    }


    function StartStopRecording()
    {
        if($("#recording-btn").hasClass("stop_recording"))
        {
            $("#recording-btn").removeClass("stop_recording").addClass("start_recording"); 
            $("#recording-btn").val('Stop Recording');
            $("#start-btn").trigger("click");
            $("#selectsongpart").slideUp(200);
            $("#selectsongnext").slideDown(200);
        }
        else 
        {
            $("#recording-btn").removeClass("start_recording").addClass("stop_recording");          
            $("#recording-btn").val('Start Recording');
            $("#stop-btn").trigger("click");
        }  
    }
 

    function PlayPauseAudio()
    {
        var audio = document.getElementById("audio");
        if($("#audio-btn").hasClass("stop_audio"))
        {
            $("#audio-btn").removeClass("stop_audio").addClass("start_audio");
            audio.play();
            startBtn.removeAttribute('disabled');
            stopBtn.removeAttribute('disabled');
            $("#audio-btn").val('Pause Audio'); 
            const audioduration = audioElement.duration * 500; // seconds
            $('.recordingsroll').animate({ scrollTop: $('.recordingsroll')[0].scrollHeight }, audioduration );
        }
        else 
        {
            $("#audio-btn").removeClass("start_audio").addClass("stop_audio");
            audio.pause();
            $("#audio-btn").val('Play Audio');
            $(".recordingsroll").stop();
        }
    }

    

    function restartrecording()
    {
        location.reload(true);
    }

    function instructionrecording()
    {
        alert('show recording instructions');
    } 
    
    function camerachangerecording()
    {
        alert("change camera");
    }
         


    if($(".recordingsroll").length > 0)
    {
        $('.recordingsroll').slimScroll({ 
            width: "100%",
            height: "100%",
            size: "2px",
            color: "#FFFFFF",
            position: "right",
            distance: "0",
            start: "top",
            opacity: 1,
            alwaysVisible: false,
            disableFadeOut: false,
            railVisible: false,
            allowPageScroll: false,
            railColor: "#000000",
            railOpacity: 1,
            railDraggable: false,
            railClass: "recordingsrollRail",
            barClass: "recordingsrollBar",
            wrapperClass: "recordingsrollContainer",
            wheelStep: 10,
            touchScrollStep: 100,
            borderRadius: "3px",
            railBorderRadius: "3px"
        });
    }
    
</script>
</body>
</html>
 